<div class="p-1">
    <mat-card>
        <mat-card-header>
            <mat-card-title>{{ userId ? "Edit User" : "Create User" }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="form" (ngSubmit)="onSubmit()" autocomplete="off" fxLayout="row wrap">
                <div fxLayout="row wrap">
                    <div fxFlex="50" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Name</mat-label>
                            <input matInput formControlName="userName" required />
                            <mat-error *ngIf="form.controls.userName.errors?.required">Name is
                                required</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="50" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Display Name</mat-label>
                            <input matInput formControlName="displayName" required />
                            <mat-error *ngIf="form.controls.displayName.errors?.required">Display Name is
                                required</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="75" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Email</mat-label>
                            <input matInput formControlName="email" required />
                            <mat-error *ngIf="form.controls.email.errors?.required">Email is
                                required</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="25" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>ROLE</mat-label>
                            <mat-select formControlName="userRoleId">
                                <mat-option [value]="null">All</mat-option>
                                <mat-option *ngFor="let item of roles" [value]="item.id">
                                    <span>{{item.name}}</span>
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="form.controls.userRoleId.errors?.required">Role is required</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="50" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Phone No</mat-label>
                            <input matInput formControlName="phone" required />
                            <mat-error *ngIf="form.controls.phone.errors?.required">Phone No is
                                required</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="50" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Password</mat-label>
                            <input matInput formControlName="password" required />
                            <mat-error *ngIf="form.controls.password.errors?.required">Password is
                                required</mat-error>
                        </mat-form-field>
                    </div>
                    
                    <div fxFlex="50" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>DOB</mat-label>
                            <input matInput [matDatepicker]="dob" formControlName="dob" required>
                            <mat-datepicker-toggle matSuffix [for]="dob"></mat-datepicker-toggle>
                            <mat-datepicker #dob></mat-datepicker>
                            <mat-error *ngIf="form.controls.dob.errors?.required">DOB is required</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="50" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Locality</mat-label>
                            <mat-select formControlName="locality">
                                <mat-option [value]="null">All</mat-option>
                                <mat-option value = "London">
                                    <span>London</span>
                                </mat-option>
                                <mat-option value = "OuterLondon">
                                    <span>Outer London</span>
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div fxFlex="100" class="px-1">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Address</mat-label>
                            <textarea matInput formControlName="address" required rows="5"></textarea>
                            <mat-error *ngIf="form.controls.address.errors?.required">Address is
                                required</mat-error>
                        </mat-form-field>
                    </div>
                    
                    <div fxFlex="100" class="px-1">
                        <p class="mt-1"><span class="uppercase fw-500">Upload Image</span></p>
                        <img *ngIf="url" [src]="url" height="100" width="100"> <br />
                        <input type="file" (change)="imageUpload($event)" #fileInput>
                    </div>

                    <div class="w-100 ">
                        <button mat-raised-button color="warn" class="cancel" type="button" (click)="backToUserList()">
                            Cancel
                        </button>
                        <button mat-raised-button color="primary" class="submit" type="submit" [disabled]="!form.valid">
                            Submit
                        </button>
                    </div>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>